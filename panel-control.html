<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - Frutería</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <!-- Barra de navegación superior -->
    <nav class="bg-green-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i class="fas fa-apple-alt text-2xl mr-2"></i>
                    <span class="font-bold text-xl">Frutería El Huerto</span>
                </div>
                <div class="flex items-center">
                    <span class="mr-4">Usuario: <span id="nombreUsuario">Admin</span></span>
                    <button onclick="location.href='logout.php'" class="bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition duration-300">
                        <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesión
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <div class="max-w-7xl mx-auto px-4 mt-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Panel de Control</h1>
        
        <!-- Tarjetas de estadísticas -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-green-100 text-green-600">
                        <i class="fas fa-apple-alt text-4xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm text-gray-500">Total Productos</p>
                        <p id="totalProductos" class="text-2xl font-semibold">Cargando...</p>
                    </div>
                    
                    <script>
                        // Realizar la solicitud a la API
                        fetch('https://localhost:7132/api/Producto')
                            .then(response => response.json())
                            .then(data => {
                                // Obtener la cantidad total de productos
                                const totalProductos = data.length;
                    
                                // Seleccionar el elemento donde se mostrará el total de productos
                                const totalProductosElement = document.getElementById('totalProductos');
                    
                                // Actualizar el contenido del elemento con el número de productos
                                totalProductosElement.textContent = totalProductos;
                            })
                            .catch(error => {
                                // Manejar el error e informar al usuario
                                console.error('Error:', error);
                    
                                // Mostrar un mensaje de error en lugar del número de productos
                                const totalProductosElement = document.getElementById('totalProductos');
                                totalProductosElement.textContent = 'Error al cargar';
                            });
                    </script>
                    
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                        <i class="fas fa-truck text-2xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm text-gray-500">Total Proveedores</p>
                        <p id="totalProveedores" class="text-2xl font-semibold">Cargando...</p>
                    </div>
                    <script>
                        // Realizar la solicitud a la API
                        fetch('https://localhost:7132/api/Proveedor')
                            .then(response => response.json())
                            .then(data => {
                                // Obtener la cantidad total de productos
                                const totalProveedores = data.length;
                    
                                // Seleccionar el elemento donde se mostrará el total de productos
                                const totalProveedoresElement = document.getElementById('totalProveedores');
                    
                                // Actualizar el contenido del elemento con el número de productos
                                totalProveedoresElement.textContent = totalProveedores;
                            })
                            .catch(error => {
                                // Manejar el error e informar al usuario
                                console.error('Error:', error);
                    
                                // Mostrar un mensaje de error en lugar del número de productos
                                const totalProveedoresElement = document.getElementById('totalProveedores');
                                totalProveedoresElement.textContent = 'Error al cargar';
                            });
                    </script>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                        <i class="fas fa-boxes text-2xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm text-gray-500">Stock Total</p>
                        <p id="totalFrutas" class="text-2xl font-semibold">Cargando...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Menú principal -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <a href="frutas-form.html" class="transform hover:scale-105 transition duration-300">
                <div class="bg-white rounded-lg shadow-md p-8 flex items-center cursor-pointer">
                    <div class="p-4 rounded-full bg-green-100 text-green-600">
                        <i class="fas fa-apple-alt text-4xl"></i>
                    </div>
                    <div class="ml-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Gestión de Frutas</h2>
                        <p class="text-gray-500 mt-2">Administrar inventario y precios de frutas</p>
                    </div>
                </div>
            </a>
            <a href="proveedores-form.html" class="transform hover:scale-105 transition duration-300">
                <div class="bg-white rounded-lg shadow-md p-8 flex items-center cursor-pointer">
                    <div class="p-4 rounded-full bg-blue-100 text-blue-600">
                        <i class="fas fa-truck text-4xl"></i>
                    </div>
                    <div class="ml-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Gestión de Proveedores</h2>
                        <p class="text-gray-500 mt-2">Administrar proveedores y contactos</p>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <script>
        function mostrarFormulario() {
            document.getElementById('formularioFruta').classList.remove('hidden');
        }

        function ocultarFormulario() {
            document.getElementById('formularioFruta').classList.add('hidden');
        }

        // Cargar y mostrar el total de frutas
        fetch('https://localhost:7132/api/Producto')
            .then(response => response.json())
            .then(data => {
                const totalFrutas = data.reduce((total, producto) => total + producto.cantidad, 0);
                document.getElementById('totalFrutas').textContent = totalFrutas;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('totalFrutas').textContent = 'Error al cargar';
            });
    </script>
</body>
</html>
